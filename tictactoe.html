<html>

<body>
    <h1 style=" text-align: center">Welcome to Tic-Tac-Toe</h1>
    <h2>PvP</h2>
    <canvas style="background-color: beige;" width="600" height="600"></canvas>
</body>
<style>
    .dot {
        height: 100px;
        width: 100px;
        border-radius: 100%;
        /* rounds corners */
        background: blue;
        position: absolute;
    }
</style>
<script>
    {board = new Array(3);
    for (let i = 0; i < 3; i++) {
        board[i] = new Array(3);
    }
    ctx = document.querySelector('canvas').getContext('2d');
    ctx.lineWidth = 2;
    ctx.beginPath();

    ctx.moveTo(0, 0);
    ctx.lineTo(0, 600);
    ctx.lineTo(600, 600)

    ctx.moveTo(0, 0);
    ctx.lineTo(600, 0);
    ctx.lineTo(600, 600);

    ctx.moveTo(0, 200);
    ctx.lineTo(600, 200);

    ctx.moveTo(0, 400);
    ctx.lineTo(600, 400);

    ctx.moveTo(200, 0);
    ctx.lineTo(200, 600);

    ctx.moveTo(400, 0);
    ctx.lineTo(400, 600);
    ctx.stroke();
    let count = 0;
    document.addEventListener('click', event => {
        if (count < 9) {
            x = event.pageX;
            y = event.pageY;
            let realX, realY, coX, coY;

            if (x < 200) {
                realX = 100;
                coX = 0;
            } else if (x < 400) {
                realX = 300;
                coX = 1;
            } else if (x < 600) {
                realX = 500;
                coX = 2;
            }
            if (y < 200) {
                realY = 100;
                coY = 0;
            } else if (y < 400) {
                realY = 300;
                coY = 1;
            } else if (y < 600) {
                realY = 500;
                coY = 2;
            }
            console.log(realX + "," + realY);
            if (board[coX][coY] != null) { return; }
            else {
                board[coX][coY] = count % 2 == 0 ? 0 : 1;
                console.log(count);
                drawAndAppend(realX, realY, count);
                count++;
            }
            
            //console.log(event.pageX+", " +event.pageY)
        }
    })
    function areAllEqual(x,y,z)
    {
        if (x==y && y==z && x!=null)
            return true;
        return false;
    }
    function drawAndAppend(x, y, count) {

        //even is red, odd is blue. red is 0, blue is 1.
        console.log(count)

        console.log(board);
        Draw(x, y, count);
        if (areAllEqual(board[0][0],board[1][1],board[2][2]) ||//diagonal \
                areAllEqual(board[0][2],board[1][1],board[2][0]) ||//diagonal /
                areAllEqual(board[0][0],board[1][0],board[2][0]) ||
                areAllEqual(board[0][1], board[1][1],board[2][1]) ||
                areAllEqual(board[0][2],board[1][2],board[2][2]) ||//vertical 
                areAllEqual(board[0][0],board[0][1],board[0][2]) ||
                areAllEqual(board[1][0],board[1][1],board[1][2]) ||
                areAllEqual(board[2][0],board[2][1],board[2][2])//horizontal
            ) {
                alert('Someone has won');
                arr = Array.from(document.getElementsByClassName('dot'));
                arr.forEach(element => {
                    document.body.removeChild(element);
                });
                window.location.reload(true);
            }
    }
    function IsWon() {//trash here
        if ((board[0][0] == board[1][1] == board[2][2] && board[0][0] != null) ||//diagonal \
            (board[0][2] == board[1][1] == board[2][0] && board[0][0] != null) ||//diagonal /
            (board[0][0] == board[1][0] == board[2][0] && board[0][0] != null) ||
            (board[0][1] == board[1][1] == board[2][1] && board[0][1] != null) ||
            (board[0][2] == board[1][2] == board[2][2] && board[0][2] != null) ||//vertical 
            (board[0][0] == board[0][1] == board[0][2] && board[0][0] != null) ||
            (board[1][0] == board[1][1] == board[1][2] && board[1][0] != null) ||
            (board[2][0] == board[2][1] == board[2][2] && board[2][0] != null)//horizontal
        ) {
            document.alert('Someone has won');
            arr = Array.from(document.getElementsByClassName('.dot'));
            arr.forEach(element => {
                document.body.removeChild(element);
            });
        }//trash

    }
    function AIMove(board, count) {
        
    }
    function Draw(x, y, count) {
        let div = document.createElement('div');
        div.className = "dot";
        if (count % 2 == 0)
            div.style.background = "red";
        else
            div.style.background = "blue";
        div.style.left = x - 40 + "px";
        div.style.top = y + 60 + "px";
        document.body.appendChild(div);
    }}

    {board1 = new Array(3);
    for (let i = 0; i < 3; i++) {
        board1[i] = new Array(3);
    }
    ctx = document.querySelector('#person').getContext('2d');
    ctx.lineWidth = 2;
    ctx.beginPath();

    ctx.moveTo(0, 0);
    ctx.lineTo(0, 600);
    ctx.lineTo(600, 600)

    ctx.moveTo(0, 0);
    ctx.lineTo(600, 0);
    ctx.lineTo(600, 600);

    ctx.moveTo(0, 200);
    ctx.lineTo(600, 200);

    ctx.moveTo(0, 400);
    ctx.lineTo(600, 400);

    ctx.moveTo(200, 0);
    ctx.lineTo(200, 600);

    ctx.moveTo(400, 0);
    ctx.lineTo(400, 600);
    ctx.stroke();
    let count = 0;
}

</script>

</html>